<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:doc="http://cssbox.sourceforge.net/docs"><head><title>CSSBox Manual</title><meta http-equiv="content-type" content="text/html; charset=utf-8" /><style type="text/css">
			@import "manual.css";
			</style></head><body><h1>CSSBox Manual</h1><p class="author">Radek Burget<br />
<a href="mailto:burgetr@fit.vutbr.cz">burgetr@fit.vutbr.cz</a>
</p><div class="toc"><h2>Table of Contents</h2><ul><li><a href="#intro">Introduction</a></li><li><a href="#basic">Basic usage</a><ul><li><a href="#basicLoading">Document Loading</a></li><li><a href="#basicLayout">Obtaining the Layout</a></li><li><a href="#basicDisplay">Displaying the document</a></li></ul></li><li><a href="#model">Rendered Document Model</a></li><li><a href="#element">Element Boxes</a></li><li><a href="#text">Text Boxes</a></li></ul></div><div class="section" id="intro"><h2>Introduction</h2><p>CSSBox is an (X)HTML/CSS rendering engine written in pure Java. Its 
primary purpose is to provide a complete and further processable information 
about the rendered page contents and layout.</p><p>This manual gives a short overview of the CSSBox usage. It shows how to
render a document and it explains how the resulting page is represented and
how the basic information about the individual parts can be obtained.</p><p>More detailed information about the individual classes can be obtained
from the <a href="../api/index.html">API documentation</a>.</p><p>Any feedback to CSSBox and/or this manual is welcome via the
<a href="http://cssbox.sourceforge.net/">CSSBox website</a>.</p></div><div class="section" id="basic"><h2>Basic usage</h2><p>The input of the rendering engine is a document DOM tree. The engine is able to
automatically load the style sheets referenced in the document and it computes the
efficient style of each element. Afterwrads, the document layout is computed.</p><div class="subsection" id="basicLoading"><h3>Document Loading</h3><p>In the examples, the <a href="http://jtidy.sourceforge.net/">JTidy</a> HTML parser
is used. However, any other DOM parser can be used. For creating the DOM tree using
JTidy, following code can be used:</p><div class="code">
<br />Tidy tidy = new Tidy();
<br />tidy.setTrimEmptyElements(false);
<br />tidy.setInputEncoding("utf-8");
<br />Document doc = tidy.parseDOM(is, null);
</div><p>Note tha JTidy has many configuration options that can be found in the
documentation</p><p>For the initial DOM and style sheet processing, a
<a href="../api/org/fit/cssbox/css/DOMAnalyzer.html" class="api">DOMAnalyzer</a> object is used:</p><div class="code">
<br />DOMAnalyzer da = new DOMAnalyzer(doc, url);
<br />da.addStyleSheet(null, CSSNorm.stdStyleSheet()); <em>//use the standard style sheet</em>
<br />da.addStyleSheet(null, CSSNorm.userStyleSheet()); <em>//use the additional style sheet</em>
<br />da.getStyleSheets(); <em>//load the author style sheets</em>
<br />da.attributesToStyles(); <em>//convert the HTML presentation attributes to inline styles</em>
</div><p>The <code>addStyleSheet()</code> method is used to add a style sheet to the document
where the style sheet is a text string containing a CSS code. In our case we add two
built-in style sheets that represent the standard document style. The <code>CSSNorm.stdStyleSheet()</code>
method returns the CSS default style sheet and <code>CSSNorm.userStyleSheet()</code> contains some
internal CSSBox modifications of the standard.</p><p>The <code>getStyleSheets()</code> method loads and processes all the internal and external
style sheets referenced from the document. In case of external style sheets, CSSBox tries to obtain
the file from the corresponding URL, if accessible.</p><p>Finally, the <code>attributesToStyles()</code> converts some HTML presentation attributes to CSS
styles (e.g. the <code>&lt;font&gt;</code> tag attributes, table attributes and some more. If the HTML
attributes need not be interpreted, this method need not be called.</p><p>The resulting <code>DOMAnalyzer</code> object represents the document code together with the
associated style.</p></div><div class="subsection" id="basicLayout"><h3>Obtaining the Layout</h3><p>The whole layout engine is represented by a graphical
<a href="../api/org/fit/cssbox/layout/BrowserCanvas.html" class="api">BrowserCanvas</a> object. The layout is
computed automatically by creating an instance of this object. The constructor arguments are
the root DOM element (normally, it is the <code>&lt;body&gt;</code> element), the DOMAnalyzer used
for obtaining the element styles, the initial viewport dimensions and the document base URL used
for loading images and other referenced content.</p><div class="code">
<br />BrowserCanvas browser = new BrowserCanvas(da.getBody(), da, new java.awt.Dimension(1000, 600), url);
</div></div><p>The created <code>browser</code> object can be directly used for both displaying
the rendered document and for obtaining the created layout model.</p><div class="subsection" id="basicDisplay"><h3>Displaying the document</h3><p>The <a href="../api/org/fit/cssbox/layout/BrowserCanvas.html" class="api">BrowserCanvas</a> class is
directly derived from the Swing <code>javax.swing.JPanel</code> class. Therefore, it can
be directly used as a Swing user interface component. The size of the component is
automatically adjusted according to the resulting document layout. The basic document
displaying is shown in the <a href="../api/org/fit/cssbox/demo/SimpleBrowser.html" class="api">SimpleBrowser</a>
example.</p></div></div><div class="section" id="model"><h2>Rendered Document Model</h2></div><div class="section" id="element"><h2>Element Boxes</h2></div><div class="section" id="text"><h2>Text Boxes</h2></div></body></html>
